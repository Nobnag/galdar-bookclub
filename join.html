<!DOCTYPE html>
<html>
    <head>
        <title> nobangworld_join</title>
        <link rel="stylesheet" href="css/common.css" />
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/validation.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
        <style>
            #wrap {margin: 0 auto;width:50vw;}
            .top {margin-bottom: 50px; color: rgb(81, 114, 179); text-align: center; width: 100%;font-size: 50px;}
            .join_info_warp {font-size:20px; margin: 0 auto;width:50vw;}
            .info_id {display: inline-block;}
            .btn_id_dup {float: right;}
            input {width: 50vw; height: 30px; margin: 10px 0 10px 0; display: block;}
            .btn_join {display: block; margin: 0 auto;width: 45vw;height: 30px;}
        </style>
    </head>
    <body>
        <div id="wrap">
            <div class="top">
                회원 가입
            </div>
            <div class="join_info_warp">
                <div class="info info_id">아이디 </div><button class="btn_id_dup">중복검사</button>
                <input type="text" name="id"placeholder="아이디" class="enter_keydown">
                <div class="info">비밀번호 </div>
                <input type="password" name="pw"placeholder="비밀번호" class="enter_keydown">
                <div class="info">비밀번호 확인 </div>
                <input type="password" name="pw_confirm"placeholder="비밀번호 화인" class="enter_keydown">
                <div class="info">이름 </div>
                <input type="text" name="name"placeholder="이름" class="enter_keydown">
                <div class="info">생년원일</div>
                <input type="text" name="dob" placeholder="숫자만8자리" class="enter_keydown">
                <div class="info">이메일</div>
                <input type="text" name="email" placeholder="이메일" class="enter_keydown">
                <div class="info">주소</div>
                <input type="text" name="addr" placeholder="주소" class="enter_keydown">
                <div class="info">휴대전화</div>
                <input type="text" name="hp" placeholder="숫자만 입력" class="enter_keydown">
                <button type="text" class="btn_join">가입하기</button>
            </div>
        </div>
        <script type="text/javascript">
            $(document).on("keydown", ".enter_keydown",function(keynum){
                if(keynum.keyCode ==13){
                    $(".btn_join").click()
                }
            });
            $(document).ready(function(){
                $(".btn_join").click(function() {
                var id = $('input[name="id"]').val().trim();
                var pw = $('input[name="pw"]').val().trim();
                var pw_confirm = $('input[name="pw_confirm"]').val().trim();
                var name = $('input[name="name"]').val().trim();
                var dob = $('input[name="dob"]').val().trim();
                var email = $('input[name="email"]').val().trim();
                var addr = $('input[name="addr"]').val().trim();
                var hp = $('input[name="hp"]').val().trim();

                if(id=="") {
                        alert("아이디를 입력하세요");                        
                        $('input[name="id"]').focus();
                        return false;
                }
                if(idRegExp.test(id) == false){
                        alert("아이디는 영문 대소문자와 숫자 4~12자리로 입력해야합니다.")
                        $('input[name="id"]').focus();
                        return false;
                }
                if(pw=="") {
                        alert("비밀번호를 입력하세요");                        
                        $('input[name="pw"]').focus();
                        return false;
                }
                if(idRegExp.test(pw) == false){
                        alert("비밀번호는 영문 대소문자와 숫자 4~12자리로 입력해야합니다.")
                        $('input[name="pw"]').focus();
                        return false;
                }
                if(pw_confirm=="") {
                        alert("비밀번호 확인을 입력하세요");                        
                        $('input[name="pw_confirm"]').focus();
                        return false;
                }
                if(pw !=pw_confirm) {
                    alert("비밀번호와 비밀번호확인이 일치하지 안습니다 비밀번호 확인을 일치시켜주세요.")
                    $('input[name="pw_confirm"]').focus();
                    return false;
                }
                if(name=="") {
                        alert("이름을 입력하세요.");                        
                        $('input[name="name"]').focus();
                        return false;
                }
                if(nameRegExp.test(name) == false){
                        alert("이름은 한글 이름 2~4자 이내 영문 이름 2~10자 이내로 작성해주셈")
                        $('input[name="name"]').focus();
                        return false;
                }
                if(dob=="") {
                        alert("생년월일를 입력하세요");                        
                        $('input[name="dob"]').focus();
                        return false;
                }
                if(dobRegExp.test(dob) == false){
                        alert("생년월일은 8자리숫자만 사용가능합니다.")
                        $('input[name="dob"]').focus();
                        return false;
                }
                if(email=="") {
                        alert("이메일을 입력하세요");                        
                        $('input[name="email"]').focus();
                        return false;
                }
                if(eailmRegExp.test(email) == false){
                        alert("정확한 이메일 주소를 입력해 주세요.")
                        $('input[name="email"]').focus();
                        return false;
                }
                if(addr=="") {
                        alert("주소를 입력하세요");                        
                        $('input[name="addr"]').focus();
                        return false;
                }
                if(hp=="") {
                        alert("휴대전화를 입력하세요");                        
                        $('input[name="hp"]').focus();
                        return false;
                }
                if(hpRegExp.test(hp)== false) {
                        alert("휴대전화는 숫자만 사용가능합니다.");                        
                        $('input[name="hp"]').focus();
                        return false;
                }
                if(id !== "" && pw !="" && name !== "" && dob !== "" && email !== "" && addr !== "" && hp !=="") {
                        var data = {
                            id: id
                            ,pw: pw
                            ,name: name
                            ,dob: dob
                            ,email: email
                            ,addr: addr
                            ,hp: hp
                        };
                        $.ajax({
                            type: 'POST',
                            url: '/member_info',
                            dataType: 'json',
                            data: data,
                            //async: false,
                            success: function(result){ 
                                console.log(result)
                                if(result.recordset[0].result == 1) {
                                    alert("회원가입요");
                                    return false;
                                }
                            },error: function(jqXHR,textStatus,errorThrown) {
                            }
                        });
                    }
                });
            });
        </script>
    </body>
</html>